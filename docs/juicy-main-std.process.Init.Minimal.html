<!doctype html><html lang=en><meta charset=UTF-8><title>znippets</title><meta content="width=device-width,initial-scale=1.0" name=viewport><link integrity="sha512-vswe+cgvic/XBoF1OcM/TeJ2FW0OofqAVdCZiEYkd6dwGXthvkSFWOoGGJgS2CW70VK5dQM5Oh+7ne47s74VTg==" crossorigin href=https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/themes/prism-tomorrow.min.css referrerpolicy=no-referrer rel=stylesheet><link href=style.css rel=stylesheet></head><body><div class=container><div class=menu><a href=index.html>Index</a></div><h1 class=title>juicy-main/std.process.Init.Minimal.zig</h1><div class=versions><div class=good>Working version(s):</div><div><a class=version-link href=v0.16.0-dev.2213+9d1a39c50.html>0.16.0-dev.2213+9d1a39c50</a></div><br><div class=bad>Failing version(s):</div><div><a class=version-link href=v0.13.0.html>0.13.0</a><a class=version-link href=v0.14.1.html>0.14.1</a><a class=version-link href=v0.15.2.html>0.15.2</a></div></div><h2>Code</h2><div class="code-container language-zig"><button class=copy-btn>Copy</button><pre class=pre-code-box><code id=codeBox>const std = @import("std");
const builtin = @import("builtin");

pub fn main(init: std.process.Init.Minimal) !void {
    var debug_allocator: std.heap.DebugAllocator(.{}) = .init;
    defer _ = debug_allocator.deinit();
    const gpa = debug_allocator.allocator();

    // ------------------------------------------------------------------------
    // CLI ARGUMENTS, using iterateAllocator()
    var i: u32 = 0;
    var args = try init.args.iterateAllocator(gpa);
    args.deinit();
    while (args.next()) |arg| : (i += 1) {
        std.debug.print("arg[{d}]={s}\n", .{ i, arg });
    }

    // ------------------------------------------------------------------------
    // CLI ARGUMENTS, using iterate()
    var args2 = init.args.iterate();
    while (args2.next()) |arg| {
        std.debug.print("{s}\n", .{arg});
    }

    // ------------------------------------------------------------------------
    // CLI ARGUMENTS, using toSlice
    var arena_allocator: std.heap.ArenaAllocator = .init(std.heap.page_allocator);
    defer arena_allocator.deinit();
    const arena = arena_allocator.allocator();

    // must use an "arena-style allocator"
    const args3 = try init.args.toSlice(arena);
    for (args3) |arg| {
        std.debug.print("arg: {s}\n", .{arg});
    }

    // ------------------------------------------------------------------------
    // ENVIRONMENT VARIABLES
    std.debug.print("contains HOME: {any}\n", .{init.environ.contains(arena, "HOME")});
    std.debug.print("contains HOME (unempty): {any}\n", .{init.environ.containsUnempty(arena, "HOME")});
    std.debug.print("contains EDITOR: {any}\n", .{init.environ.containsConstant("EDITOR")});
    std.debug.print("contains EDITOR (unempty): {any}\n", .{init.environ.containsUnemptyConstant("EDITOR")});

    std.debug.print("EDITOR: {s}\n", .{try init.environ.getAlloc(arena, "HOME")});
    if (builtin.os.tag == .windows) {
        std.debug.print("HOME: {?s}\n", .{init.environ.getWindows("HOME")});
    } else if (builtin.os.tag != .wasi or builtin.link_libc) {
        std.debug.print("HOME: {?s}\n", .{init.environ.getPosix("HOME")});
    }

    const environ_map = try init.environ.createMap(arena);
    for (environ_map.keys(), environ_map.values()) |key, value| {
        std.debug.print("env: {s}={s}\n", .{ key, value });
    }
}

// Ignore below
test {
    try main(.{
        .environ = .{ .block = &.{"HOME='/home'"} },
        .args = .{ .vector = &[_][*:0]const u8{} },
    });
}
</code></pre></div></div><script>document.querySelector(`.copy-btn`).addEventListener(`click`,()=>{let code=document.getElementById(`codeBox`).innerText;navigator.clipboard.writeText(code).then(()=>{let btn=document.querySelector(`.copy-btn`);btn.textContent=`Copied!`,setTimeout(()=>btn.textContent=`Copy`,1200)})});</script><script integrity="sha512-HiD3V4nv8fcjtouznjT9TqDNDm1EXngV331YGbfVGeKUoH+OLkRTCMzA34ecjlgSQZpdHZupdSrqHY+Hz3l6uQ==" crossorigin referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/prism.min.js></script><script integrity="sha512-5fbERmwxGa5G54RKyUzDxnZsVJl8Xf6gNwpti3AyMULmQL5tsLAoBgRor/Vo2sfTJiuAhicobxDWpef9SmXIkA==" crossorigin referrerpolicy=no-referrer src=https://cdnjs.cloudflare.com/ajax/libs/prism/1.30.0/components/prism-zig.min.js></script></body></html>